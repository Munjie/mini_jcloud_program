<view class="container">
  <view class="glow-bg red"></view>
  <view class="glow-bg blue"></view>
<view class="glass-card">
  <view class="header">
    <text class="title">{{isExistingUser ? 'IDENTIFIED' : 'WELCOME'}}</text>
    <text class="subtitle">{{isExistingUser ? 'æ¬¢è¿å›æ¥,è€é“!' : 'è¯·å®Œå–„ä¿¡æ¯ä¸ºæ›´å¥½ä½“éªŒ!'}}</text>
  </view>

  <view class="avatar-container {{isExistingUser ? 'identified-anim' : ''}}">
    <block wx:if="{{isExistingUser}}">
      <image class="avatar-circle shadow-glow" src="{{avatarUrl}}" mode="aspectFill"></image>
    </block>
    <block wx:else>
      <button class="avatar-wrapper-circle" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar">
        <image class="avatar-circle" src="{{avatarUrl || defaultAvatar}}" mode="aspectFill"></image>
        <view class="camera-badge">ğŸ“·</view>
      </button>
    </block>
  </view>

  <view class="user-info-section">
    <view wx:if="{{isExistingUser}}" class="nick-name-text">{{nickName}}</view>
    <view wx:else class="input-group">
      <input type="nickname" class="nickname-input" placeholder="è¯·è¾“å…¥æ‚¨çš„æ˜µç§°" model:value="{{nickName}}" bindchange="onNicknameChange"/>
    </view>
  </view>

  <button 
    class="login-btn {{loading ? 'loading-state' : ''}} {{isExistingUser ? 'old-user-btn' : ''}}" 
    bindtap="handleLogin" 
    disabled="{{loading}}"
  >
    <block wx:if="{{loading}}">
      <text class="loading-spin">âŒ›</text> ç™»å½•ä¸­...
    </block>
    <block wx:else>
      {{buttonText || (isExistingUser ? 'ç¡®è®¤ç™»å½•' : 'ç«‹å³ç™»å½•')}}
    </block>
    <view class="shine" wx:if="{{!loading}}"></view>
  </button>
</view>
</view>